\chapter{Einleitung}
\label{einleitung}
In unserer Arbeit untersuchen wir die Möglichkeiten welche die \gls{Cloud}-Datenbank Google Fusion Tables bietet. Es sollen einige Prototypen für verschiedenste Anwendungsfälle im \gls{GIS}-Bereich erstellt werden, welche das Potential der Datenbank aufzeigen.

\section{Problemstellung}
Die Aufgabenstellung stammt von der GEOINFO AG\footnote{\url{www.geoinfo.ch}}, welche massgeschneiderte \gls{GIS}-Softwarelösungen für ihre Kunden entwickelt.

Für solche Unternehmen wird es nach und nach schwieriger sich auf dem Markt zu beweisen, da bereits viele cloudbasierte \gls{GIS}-Lösungen sehr günstig oder gar kostenlos erhältlich sind. Durch die Prototypen soll ersichtlich gemacht werden, welche Anwendungsfälle von bestehenden proprietären \gls{GIS}-Sytemen bereits mit Google Fusion Tables realisierbar wären und welchen Aufwand dies darstellen würde.

\section{Aufgabenstellung}
Im Rahmen dieser Arbeit sollen das Potential aber auch Einschränkungen von Google Fusion Tables für den Einsatzbereich eines öffentlichen Web \gls{GIS} evaluiert werden. Es ist aufzuzeigen, welche der typischen Anwendungsfälle, wie sie in aktuellen Web GIS Lösungen\footnote{z.B. \url{www.geoportal.ch} oder \url{www.stadtplan.stadt-zuerich.ch}} implementiert sind, auf Basis von Google Fusion Tables und Google Maps realisiert werden könnten. Eine Auswahl dieser Grundfunktionen ist anhand eines Prototypen zu implementieren. Die Zielgruppe sind demnach \gls{GIS}-Sachbearbeiter.

\section{Ziele}
In der Aufgabenstellung der Arbeit wurden folgende Ziele definiert:
\begin{itemize}
\item Evaluation von Google Fusion Tables in Kombination mit Google Maps u.a. mit Blick auf deren Funktionalität, Anwendbarkeit, Zuverlässigkeit und Performance
\item Entwurf und Dokumentation einer \gls{GIS}-Architektur, welche einerseits Cloud Services (am Beispiel von Fusion Talbes) andererseits die Geodaten- und Serviceinfrastruktur einer Organisation integriert oder migriert.
\item Analyse verschiedener Use Cases wobei einer davon als Prototyp einer Webapplikation (voll) implementiert werden soll. 
\item Implementierung und Bewertung von verschiedenen cloudbasierten \gls{GIS}-Prototypen unter Verwendung der Google Fusion Tables API
\begin{itemize}
	\item Prototyp(en) aus Use Case-Evaluation (oben). Dabei sollen v.a. auch die Geometrietypen Linestring und Polygon berücksichtigt werden.
	\item Prototyp einer Datenerfassung/Verwaltung am Beispiel eines Point-of-Interest (POI) Layers mit grossen Datenmengen
\end{itemize}
\item Prototyping für zukünftige (\gls{GIS}-) Kollaborationsplattformen. Es soll aufgezeigt werden, wie sich bestehende Konzepte\footnote{z.B. \url{www.mysg.ch/locations} oder \url{http://ch.tilllate.com/de/locations})} verbessern lassen oder weiterentwickeln könnten.
\end{itemize}

\section{Rahmenbedingung}
\begin{itemize}
\item Es gelten die Rahmenbedingungen, Vorgaben und Termine der HSR
\item Die Projektabwicklung orientiert sich an einer iterativen, agilen Vorgehensweise. Als Vorgabe dient dabei Scrum, wobei bedingt durch das kleine Projektteam gewisse Vereinfachungen vorgenommen werden. Meilensteine werden bezüglich Termin und Inhalt mit dem verantwortlichen Dozenten und dem Projektpartner vereinbart.
\item Die Kommunikation in der Projektgruppe, in der Dokumentation und an den Präsentationen erfolgt in Deutsch.
\item Eine Prototypen-Website ist in HTML/JavaScript zu implementieren und sollte auf verschiedenen Plattformen lauffähig sein.
\end{itemize}

\section{Vorgehen}
Die Arbeit umfasst zwei Themenbereiche. Einen theoretischen Teil in dem untersucht wird, inwiefern Google Fusion Tables eine Konkurrenz für bestehende proprietäre \gls{GIS}-Lösungen darstellt. Als zweiten Teil sollen verschiedene Anwendungsfälle mit Google Fusion Tables als Prototypen nachgebaut werden, wobei einer davon als mobile Webapplikation ausprogrammiert werden soll.

\subsection{Potential von Google Fusion Tables}
In einem theoretischen Teil soll aufgezeigt werden, inwiefern sich bestehende \gls{GIS}-Lösungen mit Google Fusion Tables ablösen lassen.

Dies soll am Beispiel eines Migrationsszenarios festgestellt werden. Die bestehenden \gls{GIS}-Daten sollen möglichst einfach exportiert und anschliessend in eine Google Fusion Tables-Datenbank importiert werden. Dafür werden die geeigneten Formate zur Übertragung der Daten evaluiert.

Da sich die Datenstrukturen von bestehenden Lösungen stark unterscheiden können, ist es nicht das Ziel eine Schritt-für-Schritt Anleitung zu erstellen. Primär geht es darum mögliche Migrationspfade zu entwickeln.

Dadurch soll das gegenwärtige Potential von Google Fusion Tables abgeschätzt werden. Diese Erkenntnis soll \gls{GIS}-Lösungsprovidern einen Überblick verschaffen, inwiefern Google Fusion Tables bereits als möglicher Konkurrent angesehen werden muss.

\subsection{Erstellung von Prototypen}
Der beschriebene theoretische Teil soll anschliessend durch verschiedene Prototypen belegt werden. Es soll versucht werden mehrere Standard-Anwendungsfälle im GIS-Bereich mittels Google Fusion Tables zu realisieren. Diese Prototypen sollen hauptsächlich in Form von Webapplikationen entwickelt werden.

Ein Anwendungsfall soll zusätzlich als vollwertige Webapplikation für Mobilgeräte ausprogrammiert werden.

\section{Aufbau der Arbeit}
Die Arbeit ist in drei Teile gegliedert. Zuerst kommt eine theoretische Einführung ins Thema mit einer Abschätzung des Potentials von Google Fusion Tables (siehe Kapitel \ref{einleitung} und \ref{einfuehrung}) und unserer Infrastruktur (siehe Kapitel \ref{infrastruktur}), im zweiten Teil gehts es dann um die erstellten Arbeitsresultate (siehe Kapitel \ref{beispielapplikationen}, \ref{worlddata}, \ref{fixmystreet} und \ref{converter-build}) und schliesslich im letzten Teil um das Projektmanagement (siehe Kapitel \ref{projektmanagement}).

Wir haben während dem Semester Sitzungen mit unserem Betreuer durchgeführt und auch unseren Auftraggeber zweimal getroffen. Dadurch haben wir regelmässig Feedback zu unserem Arbeitsfortschritt erhalten und konnten unseren Stand präsentieren.

Neben diesem Dokument umfasst diese Arbeit zahlreiche Beispielanwendungen und zwei WebApps, welche online verfügbar sind. Der dazugehörige Source Code ist frei zugänglich im Netz sowie auf der beigelegten CD zu finden.

\begin{longtable}{|l|l|}
\hline 
\textbf{Arbeitsresultat} & \textbf{URL} \\ 
\hline 
Übersichtsseite & \url{http://gft.rdmr.ch} \\ 
\hline 
WorldData Use Case & \url{http://worlddata.rdmr.ch} \\ 
\hline 
FixMyStreet Use Case & \url{http://fixmystreet.rdmr.ch} \\ 
\hline 
Converter-Build & \url{http://jenkins.rdmr.ch:8080/job/Convert-GIS-files/} \\ 
\hline 
Repsitory & \url{https://github.com/odi86/GFTPrototype} \\ 
\hline 
\caption{Übersicht aller Arbeitsresultate}
\label{arbeitsresultate}
\end{longtable} 

\section{Stand der Technik}
Diese Arbeit beschäftigt sich mit sogenannten \gls{Cloud}-Datenbanken, mit einem Fokus auf ortsbezogene Daten. Wichtig sind dabei die verschiedenen Möglichkeiten zur Visualisierung von Daten. Dieser Abschnitt erklärt die zugehörigen Konzepte und Produkte.

\subsection{Software-as-a-Service (SaaS) / Cloud}
Der Begriff \emph{Software-as-a-Service} (\gls{SaaS}) hat sich in den letzten Jahren etabliert und bezeichnet die Dienstleistung eine Software nicht nur für einen Kunden zu entwickeln, sondern auch gleich deren Betrieb zu übernehmen. Diese gesamthafte Dienstleistung wird dann dem Kunden angeboten, so dass dieser keine eigene Infrastruktur betreiben muss. Die \gls{Cloud} ist die logische  Erweiterung dieses Konzepts, dabei wird der angebotene Dienst transparent auf mehreren Umgebungen und an verschiedenen Lokationenn angeboten. Dies soll zum einen eine hohe Erreichbarkeit gewährleisten, zum anderen kann ein Anbieter dadurch sehr leicht skalieren.\cite{cloud}

\subsection{Datenbank in der Cloud}
\gls{Cloud}-Datenbanken wie Google Fusion Tables schaffen das Problem der Erreichbarkeit ab. Sie sind dezentral in der gespeichert und dort lassen sie sich einfach vertikal skalieren. Dies macht es sehr einfach Zugang zu bekommen und Daten mit anderen Personen zu teilen. Dank der bereitgestellten Infrastuktur kann sich ein Anwender der Datenbank auf das wesentliche konzentrieren: die Daten in geeigneter Form abzulegen und auszulesen.

\subsection{Produkte}
Neben der in dieser Arbeit beschriebenen Google Fusion Tables (siehe Kapitel \ref{einfuehrung}) gilt es vor allem noch das Produkt CartoDB zu erwähnen. CartoDB\footnote{\url{http://cartodb.com/}} basiert auf PostGIS\footnote{\url{http://postgis.refractions.net/}}, einer PostgreSQL-Erweiterung für geografische Daten. Das Projekt wurde während unserer Arbeit, am 3. April 2012, veröffentlicht\footnote{Welcome to CartoDB 1.0 \url{http://blog.cartodb.com/post/20403296927/welcome-to-cartodb-1-0}}. Das Projekt ist Open-Source und lässt sich somit komplett in einer eigenen Umgebung installieren\footnote{Repository mit Installationsanleitung: \url{https://github.com/Vizzuality/cartodb}}.

Daneben bietet CartoDB aber wie Google auch die Möglichkeit den Dienst von ihnen zu beziehen (\gls{SaaS}). Obwohl  die Konzepte sehr verschieden sind, sind die beiden Produkte durchaus miteinander vergleichbar\footnote{CartoDB hat einen Vergleich zwischen ihrem Produkt und Google Fusion Tables veröffentlicht. Auch wenn der Artikel stark einseitig gefärbt ist, zeigt er doch ein paar interessante Unterschiede auf: \url{http://blog.cartodb.com/post/21264086445/comparing-fusion-tables-to-open-source-cartodb}}.

\section{Vision/Umsetzungskonzept}
Um das Potential von Google Fusion Tables bewerten zu können, mussten wir uns zuerst mit dem Dienst vertraut machen. Die Idee war es, verschiedene Prototypen zu erstellen, welche jeweils verschiedene Aspekte des Produktes aufzeigen. Die Prototypen sollten sich dabei an gängige Aufgabenstellungen aus dem \gls{GIS}-Bereich anlehnen.

Neben dem \gls{GIS}-Aspekt war es uns wichtig unabhängige Lösungen zu bauen welche auf möglichst vielen Plattformen laufen. Aus diesem Grund haben wir uns einerseits für webbasierte Applikationen entschieden, andererseits in möglichst allen Bereichen mit \gls{Cloud}-gestützten Diensten gearbeitet. Der Serveranteil sollte dabei so gering wie möglich sein, um keine unnötigen Abhängigkeiten und Hürden zu schaffen.

Da wir der festen Überzeugung sind, dass mobile Applikationen immer wichtiger werden, haben wir Wert darauf gelegt, dass die Prototypen mobile-fähig sind. 

\section{Resultate der Arbeit}
Wir haben das gesteckte Ziel, das Potential von Google Fusion Tables abzuschätzen, sehr gut erreicht. Unser schrittweises Vorgehen hat sich ausbezahlt. Wir konnten zu Beginn die Theorie und den Praxiseinsatz sehr rasch lernen, in dem wir zahlreiche Beispielapplikationen entwickelt haben. So konnten wir uns langsam einen Überblick über die Möglichkeiten und Limitation von GFT machen. Ein Teil dieser ersten Beispielapplikationen ist immer noch vorhanden (siehe Kapitel \ref{beispielapplikationen}).

Während der Arbeit hat es sich dann ergeben, dass wir sogenannte \emph{Trusted Tester} für das neue API von Google wurden. Dort konnten wir neuen Features ausprobieren und standen in direktem Kontakt mit den Fusion Tables Entwicklern (siehe Abschnitt \ref{austausch-mit-google}). Gerade mit dem neuen API haben wir komplettes Neuland betreten. Die von uns geschriebene JavaScript Library bietet einen einfachen Zugang zu diesem API.

Später haben wir uns dann auf die Use Cases konzentriert. Die Idee dabei war es, möglichst realistische Szenarien zu finden und dann eine mögliche Lösung mit Google Fusion Tables aufzuzeigen. Dies hat es uns ermöglicht durchgängige Anleitungen zu erstellen und die verschiedenen Facetten zu ergründen. Beim \emph{WorldData} Use Case lag dabei das Gewicht auf dem Importieren und Zusammenführen von Daten aus verschiedenen Quellen sowie der Handhabung von grösseren Datenmengen (siehe Kapitel \ref{worlddata}). Beim zweiten Use Case \emph{FixMyStreet} stand eher die Kollaboration, der Live-Gedanke und die Nutzung von GFT als Applikations-Datenbank im Vordergrund (siehe Kapitel \ref{fixmystreet}).

Ursprünglich wollten wir 3 Use Cases umsetzen, wir haben uns dann aber im Verlauf der Arbeit und in Absprache mit Herr Stefan Keller und Herr Marco Lehmann dazu entschieden, nur 2 Use Cases umzusetzen. Dies vor allem aus zeitlichen Gründen. Dadurch konnten wir einen der beiden Use Cases vertiefen und daraus einen vollwertigen WebApp-Prototypen bauen.

Als Zusatz- oder Nebenprodukt haben wir noch ein Tool bereitgestellt mit dem sich zum einen Geodaten in andere Formate konvertieren lassen und zum anderen direkt Dateien als Tabellen in Google Fusion Tables importieren lassen (siehe Kapitel \ref{converter-build}).

\section{Schlussfolgerungen und Ausblick}
Das Fazit unserer Arbeit fällt gemischt aus. Zum einen bietet Google Fusion Tables einen kostenlosen Dienst an, welcher für kleinere Anwendungen genügend bietet sowohl als Datenbank-Backend wie auch als Speicherort für Daten eines Benutzers. Das SQL API lässt fast keine Wünsche offen.

Die Handhabung ist sehr einfach und entspricht meistens den Erwartungen. Die Dokumentation ist sehr gut und ausführlich. Falls doch Fragen auftauchen gibt es eine aktive Community, an die man sich wenden kann. 

Ein grosses Plus ist die einfache Bedienung und die zahlreichen Visualisierungsmöglichkeiten, welche Google bereits anbietet. Durch die Integration in Google Maps können Daten sehr einfach auf einer Karte dargestellt werden.

Zum anderen gibt es aber einige harte Limiten, an welche man stösst, wenn man grössere Applikationen bauen will. Dass zum Beispiel jeweils nur die ersten 100'000 Datensätze einer Tabelle als Result eines Queries geliefert werden, kann für grössere Datensammlungen zu einem Problem werden. Auch die Anzahl gleichzeitiger Zugriffe ist limitiert, sofern man dafür nicht extra bezahlen möchte.

Wenn man die Features ansieht, merkt man schnell, dass ein Typ Use Case unterstützt wird, jedoch nicht viel mehr. Es gibt zwar die Möglichkeit über Merged Tables einen Left-Outer-Join von 2 Tabellen hinzubekommen, jedoch wäre die normale SQL Join Syntax sehr wünschenswert, da sich damit beliebige Abfragen realisieren lassen. 

Die OAuth Dokumentation ist zwar für den Normalfall (Zugriff auf Tabellen eines Benutzers) sehr gut dokumentiert. Das neue \emph{Service Account}-Modell findet noch fast keine Erwähnung. Die Handhabung ist etwas sperrig, aber schlussendlich doch machbar. Leider sind aber momentan die Berechtigungen nur sehr grob einstellbar. So gibt es lediglich einen OAuth-Scope, und dieser ermöglicht alle Schreiboperationen auf einem Account. Für einige Situationen wäre es wünschenswert gewisse SQL-Befehle (z.B. \inlinecode{DELETE}) zu verbieten.

Das Web-GUI lässt auch noch einige Wünsche offen, da es noch nicht sehr stabil läuft. Die Bedienung ist nicht intuitiv und eignet sich gar nicht um Daten zu ändern. Das neue, sogenannte \emph{experimental UI}, hat schon einige Verbesserungen gebracht, es bietet aber noch immer nicht die gleichen Funktionen wie das UI. So lassen sich zum Beispiel keine Views mit einer \inlinecode{WHERE}-Klausel über das Web-GUI definieren. 

Das neue API sieht sehr vielversprechend aus. Die Entwickler bei Google sind grundsätzlich offen für Anregungen, Kritik oder Feature Requests. Dieses noch sehr junge Projekt ist aktiv in Entwicklung. Es bleibt abzuwarten, wie sich GFT und das Konkurrenzprodukt CartoDB zukünftig positionieren werden.