\chapter{Umsetzung}
\label{umsetzung}

\section{Stand der Technik}
Diese Arbeit beschäftigt sich mit sogenannten \gls{Cloud}-Datenbanken, mit einem Fokus auf ortsbezogene Daten. Wichtig sind dabei die verschiedenen Möglichkeiten zur Visualisierung von Daten. Dieser Abschnitt erklärt die zugehörigen Konzepte und Produkte.

\subsection{Software-as-a-Service (SaaS) / Infrastructure-as-a-Service (IaaS)}
Der Begriff \emph{Software-as-a-Service} (\gls{SaaS}) hat sich in den letzten Jahren etabliert und bezeichnet die Dienstleistung, eine Software nicht nur für einen Kunden zu entwickeln, sondern auch gleich deren Betrieb zu übernehmen. Diese gesamthafte Dienstleistung wird dann dem Kunden angeboten, so dass dieser keine eigene Infrastruktur betreiben muss. Die \gls{Cloud} ist die logische  Erweiterung dieses Konzepts, dabei wird der angebotene Dienst transparent auf mehreren Umgebungen und an verschiedenen Lokationen angeboten. Dies soll zum einen eine hohe Erreichbarkeit gewährleisten und zum anderen die Skalierbarkeit erleichtern.\cite{cloud}

Bei Google Fusion Tables handelt es sich genau genommen um eine Infrastructure-as-a-Service (IaaS) Dienstleistung\footnote{Einordnung gemäss \url{https://www.e-education.psu.edu/cloudGIS/node/91}}, da lediglich die Speicherung der Daten ausgelagert ist. Grundsätzlich würde Google aber das ganze Portfolio anbieten (Webserver,  Software etc.).

\subsection{Datenbank in der Cloud}
\gls{Cloud}-Datenbanken wie Google Fusion Tables schaffen das Problem der Erreichbarkeit ab. Sie sind dezentral in der \gls{Cloud} gespeichert und lassen sich  einfach vertikal skalieren. Dies vereinfacht den Zugang zu den Daten und ermöglicht es, diese mit anderen Personen zu teilen. Dank der bereitgestellten Infrastruktur kann sich ein Anwender der Datenbank auf das Wesentliche konzentrieren: die Daten in geeigneter Form abzulegen und auszulesen.

\subsection{Alternative zu Google Fusion Tables}
Neben der in dieser Arbeit beschriebenen Google Fusion Tables (siehe Kapitel \ref{einfuehrung}) gilt es vor allem noch das Produkt CartoDB zu erwähnen. CartoDB\footnote{\url{http://cartodb.com/}} basiert auf PostGIS\footnote{\url{http://postgis.refractions.net/}}, einer PostgreSQL-Erweiterung für geografische Daten. Das Projekt wurde während unserer Arbeit, am 3. April 2012, veröffentlicht\footnote{Welcome to CartoDB 1.0 \url{http://blog.cartodb.com/post/20403296927/welcome-to-cartodb-1-0}}. Das Projekt ist Open-Source und lässt sich somit komplett in einer eigenen Umgebung installieren\footnote{Repository mit Installationsanleitung: \url{https://github.com/Vizzuality/cartodb}}.

Daneben bietet CartoDB aber wie Google auch die Möglichkeit, den Dienst von ihnen zu beziehen (\gls{IaaS}). Obwohl  die Konzepte sehr verschieden sind, sind die beiden Produkte durchaus miteinander vergleichbar\footnote{CartoDB hat einen Vergleich zwischen ihrem Produkt und Google Fusion Tables veröffentlicht. Auch wenn der Artikel stark einseitig gefärbt ist, zeigt er doch ein paar interessante Unterschiede auf: \url{http://blog.cartodb.com/post/21264086445/comparing-fusion-tables-to-open-source-cartodb}}.

\section{Vision/Umsetzungskonzept}
Um das Potential von Google Fusion Tables bewerten zu können, mussten wir uns zuerst mit dem Dienst vertraut machen. Die Idee war es, verschiedene Prototypen zu erstellen, welche jeweils verschiedene Aspekte des Produktes aufzeigen. Die Prototypen sollten sich dabei an gängige Aufgabenstellungen aus dem \gls{GIS}-Bereich anlehnen.

Neben dem \gls{GIS}-Aspekt war es uns wichtig, unabhängige Lösungen zu bauen, welche auf möglichst vielen Plattformen laufen. Aus diesem Grund haben wir uns einerseits für webbasierte Applikationen entschieden, andererseits in möglichst allen Bereichen mit \gls{Cloud}-gestützten Diensten gearbeitet. Der Serveranteil sollte dabei so gering wie möglich sein, um keine unnötigen Abhängigkeiten und Hürden zu schaffen.

Da wir der festen Überzeugung sind, dass mobile Applikationen immer wichtiger werden, haben wir Wert darauf gelegt, dass die Prototypen mobile-fähig sind. 

\section{Resultate der Arbeit}
Wir haben das gesteckte Ziel, das Potential von Google Fusion Tables abzuschätzen, sehr gut erreicht. Unser schrittweises Vorgehen hat sich ausbezahlt. Wir konnten zu Beginn die Theorie und den Praxiseinsatz sehr rasch lernen, in dem wir zahlreiche Beispielapplikationen entwickelt haben. So konnten wir uns langsam einen Überblick über die Möglichkeiten und Limitationen von GFT verschaffen.

Während der Arbeit hat es sich dann ergeben, dass wir sogenannte \emph{Trusted Tester} für das neue \gls{API} von Google wurden. Dort konnten wir neue Features ausprobieren und standen in direktem Kontakt mit den Fusion Tables Entwicklern (siehe Abschnitt \ref{austausch-mit-google}). Gerade mit dem neuen \gls{API} haben wir komplettes Neuland betreten. Die von uns geschriebene JavaScript Library bietet einen einfachen Zugang zu diesem \gls{API}.

Später haben wir uns dann auf die Umsetzung der Use Cases konzentriert. Die Idee dabei war es, möglichst realistische Szenarien zu finden und dann eine mögliche Lösung mit Google Fusion Tables aufzuzeigen. Beim \emph{WorldData} Use Case lag dabei das Gewicht auf dem Importieren und Zusammenführen von Daten aus verschiedenen Quellen sowie der Handhabung von grösseren Datenmengen (siehe Kapitel \ref{worlddata}). Beim zweiten Use Case \emph{FixMyStreet} stand eher die Kollaboration, der Live-Gedanke und die Nutzung von GFT als Applikations-Datenbank im Vordergrund (siehe Kapitel \ref{fixmystreet}).

Ursprünglich wollten wir drei Use Cases umsetzen, wir haben uns dann aber im Verlauf der Arbeit und in Absprache mit unserem Betreuer und dem Industriepartner dazu entschieden, nur zwei Use Cases umzusetzen. Diese Entscheidung hat uns ermöglicht, einen der beiden Use Cases zu vertiefen und daraus einen vollwertigen \gls{WebApp} Prototypen zu bauen.

Zusätzlich haben wir ein Tool bereitgestellt, mit dem sich zum einen Geodaten in andere Formate konvertieren lassen und zum anderen direkt Dateien als Tabellen in Google Fusion Tables importieren lassen (siehe Kapitel \ref{converter-build}).

\section{Schlussfolgerungen und Ausblick}
Die Evaluation von GFT fällt gemischt aus. Zum einen bietet Google Fusion Tables einen kostenlosen Dienst an, welcher für kleinere Anwendungen genügend bietet sowohl als Datenbank-Backend wie auch als Speicherort für Daten eines Benutzers. Das SQL \gls{API} hingegen ist an einigen Stellen noch unvollständig und lässt sich noch nicht mit dem einer vollwertigen Datenbank vergleichen.

Die Handhabung der \gls{API} ist dagegen sehr einfach und entspricht meistens den Erwartungen. Die Dokumentation ist sehr gut und ausführlich. Falls doch Fragen auftauchen, gibt es eine aktive Community, an die man sich wenden kann. 

Ein grosses Plus ist die einfache Bedienung und die zahlreichen Visualisierungsmöglichkeiten, welche Google bereits anbietet. Durch die Integration in Google Maps können Daten sehr einfach auf einer Karte dargestellt werden.

Zum anderen gibt es aber einige harte Limiten, welche einen daran hindern, grössere Applikationen mit Fusion Tables zu bauen. Die Limite beispielsweise, welche vorgibt, dass jeweils nur die ersten 100'000 Datensätze einer Tabelle als Resultat einer Abfrage geliefert werden, kann für grössere Datensammlungen zu einem Problem werden. Auch die Anzahl gleichzeitiger Zugriffe ist limitiert, sofern man dafür nicht extra bezahlen möchte.

Wenn man die Features ansieht, merkt man schnell, dass ein Typ Use Case unterstützt wird, jedoch nicht viel mehr. Es gibt zwar die Möglichkeit über Merged Tables einen \inlinecode{LEFT OUTER JOIN} von 2 Tabellen hinzubekommen, jedoch wäre die normale SQL \inlinecode{JOIN}-Syntax sehr willkommen, da sich damit beliebige Abfragen realisieren lassen. 

Die \gls{OAuth} Dokumentation ist zwar für den Normalfall (Zugriff auf Tabellen eines Benutzers) sehr gut dokumentiert. Das neue \emph{Service Account}-Modell findet aber noch fast keine Erwähnung. Die Handhabung ist etwas sperrig, schlussendlich aber doch machbar. Leider sind momentan die Berechtigungen nur sehr grob einstellbar. So gibt es lediglich einen \gls{OAuth}-Scope, und dieser ermöglicht alle Schreiboperationen auf einem Account. Für einige Situationen wäre es wünschenswert, gewisse SQL-Befehle (z.B. \inlinecode{DELETE}) zu verbieten.

Das Web-GUI der Google Fusion Tables lässt ebenfalls noch einige Wünsche offen. Zum einen läuft es nicht sehr stabil und zum anderen ist die Bedienung nicht intuitiv. Das neue, sogenannte \emph{experimental UI}, hat schon einige Verbesserungen gebracht, es fehlen aber einige Funktionen, welches das "`alte"' UI bot. So lassen sich zum Beispiel keine Views mit einer \inlinecode{WHERE}-Klausel über das Web-GUI definieren. 

Das neue \gls{API} sieht sehr vielversprechend aus. Die Entwickler bei Google sind grundsätzlich offen für Anregungen, Kritik oder Feature Requests. Es bleibt abzuwarten, wie sich GFT und das Konkurrenzprodukt CartoDB zukünftig positionieren werden.